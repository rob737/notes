------ Scalability :

1. Vertical Scalability : Increase in computation power of machine (or EC2 instance).
						  e.g. upscaling from t2.micro to t2.large
						  Vertical scalability is limited by hardware capabilities.	

2. Horizontal Scalability : Replicating machine of the same configuration (also called elasticity).
							This is what is basically distributed systems.
							We can leverage ASG(Auto Scaling groups) and LB (Load Balancer).
							
------- High Availability :

It means we are running our application in atleast 2 data centers (i.e. 2 availability zones).	
We can leverage ASG Multi AZ or load balancer multi AZ.


-------- Load balancers :

ELB (Elastic Load balancer) is a managed service by AWS.

Load balancers are servers that forward traffic to downstream EC2 servers.
client connects to load balancers endpoint and are not aware of EC2 endpoints.

Health check of EC2 instance is done by using port and a route (e.g. /health and port is 4567 via http protocol).

There are 4 types of Load balancers :
1. Classic Load balancer (deprectaed)
2. Application load balancer - supports HTTP, HTTPS, WebSocket.
3. Network Load balancer - supports TCP, TLS(Secured TCP), UDP.
4. Gateway Load balancer - Operates at layer 3 (Network layer).


---------- Application Load Balancer :
It is layer 7 load balancer.
can incorporate path based, query based, hostname based etc routing.

it is a great fit for microservice and container based application (e.g. Amazon ECS and docker).
Downstream EC2 systems are part of target groups.

1. It has fixed hostname e.g. XXX.region.elb.amazonaws.com 
2. True IP of clients is present in header X-Forwarded-For, port of client in X-Forwarded-Port and protocol in X-Forwarded-Proto.

Doubt : 
Is connection from client to ALB terminated once connection is established between ALB and client or it waits for response from one of EC2 servers?
						
------------ Network Load Balancer :

It is Layer 4 load balancer : Forward TCP and UDP traffic to downstream instances.

Less latency around ~100 ms as compared to ~400 ms in ALB.

Note : It has one static IP per AZ and is used for high performance systems.
not included in AWS free tier.

Unlike ALB, NLB doesn't have associated security groups.


------------ Gateway Load Balancer :

Operates at Layer 3 i.e. Network layer.

It is used for request interception like firewall etc.

Route table in VPC is modified to forward incoming request to GLB and if packet is successfully verified then it gets forwarded to ALB or directly to EC2 instance.


uses the GENEVE protocol on port 6081.


------------- Sticky Session :

Also called as session affinity.

Basically same client must be redirected to same downstream instance via LB.